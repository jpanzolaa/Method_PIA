# Method_PIA
Method Based on Perceived Information Asymmetry

This section outlines a data mining approach to develop a model for electric vehicle depreciation. By collecting and refining data from resale markets and launch prices, the model addresses information asymmetry between buyers and sellers. It calculates buyer and seller utility to provide an accurate vehicle depreciation estimator.

![Alt text](https://github.com/jpanzolaa/Method_PIA/blob/main/img/Fig01.png)

The script that is responsible for carrying out the scraping process is with the data source: scraping.py

This script generates a collection of data in the file SourceRAW.csv. This file is manually transformed into SourceRAW.xlsx for manual data cleaning.

As a use case, Mercadolibre was used for the webscraping process and to obtain the prices of the vehicles manually, the data obtained from the Motor Magazine was used, all within the Colombian context.

The data path is located at mnt/data/.

# vis01.py

## Description
The `vis01.py` script is used for visualizing and comparing data from two CSV files. It generates horizontal stacked bar charts and customizes their appearance for clarity and presentation.

## Processes

1. **Loading Data**:  
   The script reads two CSV files, `Mod_1_DF.csv` and `Mod_4_DF.csv`, into pandas DataFrames.

2. **Visualization Setup**:  
   It prepares the data for visualization by creating horizontal stacked bar charts.

3. **Plotting**:  
   The script generates horizontal stacked bar plots for both matrices. It uses a paired color palette for better distinction between categories and adjusts the chart layout.

4. **Customization**:  
   The script customizes the appearance of the plots, such as removing unnecessary chart elements like top and right spines.

5. **Saving Output**:  
   It saves the generated figures as both PNG and PDF files, ensuring they are in high resolution, suitable for publication.

6. **Display**:  
   Finally, the script displays the charts for visual inspection.

## Output
- Figures are saved as `PNG` and `PDF` formats for further use or publication.



# vis02.py Documentation

## Overview

The script `vis02.py` generates visual comparisons of data using heatmaps and color bars, focusing on matrices from CSV files that reflect various metrics over time. This visualization is particularly useful for analyzing relationships and trends between two datasets, with a clear emphasis on professional formatting, layout optimization, and graphical clarity.

### Key Processes

1. **Data Loading:**
   - The script loads two CSV files (`Mod_1_DF.csv` and `Mod_4_DF.csv`) into Pandas DataFrames named `matriz1` and `matriz4`.
   - Each matrix represents data that are indexed by company (`empresas`) on the Y-axis and by years (`anos`) on the X-axis.

2. **Data Processing:**
   - The script calculates the minimum and maximum values for each matrix. This helps in normalizing the color scale across both heatmaps.
   - Additionally, missing data (NaN) are identified and handled by creating a mask, ensuring they do not interfere with the visual representation.

3. **Visualization:**
   - Two side-by-side heatmaps are generated using Seaborn (`sns.heatmap`), one for each matrix. The heatmaps display color-coded values, and annotations are added for clarity.
   - Professional design choices include adjusting label fonts, ensuring grids and spines are visible or hidden appropriately, and setting consistent color maps (`coolwarm`).

4. **Color Bar Customization:**
   - A unified color bar is added next to the heatmaps to represent the value scale. The range is based on the global minimum and maximum values across both matrices.
   - The layout is further adjusted using `plt.tight_layout` and additional space for the color bar.

5. **File Saving:**
   - The final figures are saved in both PNG and PDF formats with high resolution (300 DPI), making them suitable for publication. The saved figures are named `Ana01.png` and `Ana01.pdf`.

6. **Plot Display:**
   - After saving the figures, the script displays the heatmaps using `plt.show()` for real-time visualization.

### Output Files
- `Ana01.png`
- `Ana01.pdf`

### Libraries Used
- `numpy`: For numerical operations.
- `pandas`: For handling CSV file input and managing DataFrames.
- `matplotlib`: For creating plots and saving figures.
- `seaborn`: For generating heatmaps and advanced plot styling.

### Summary
`vis02.py` is designed for advanced data visualization, generating professional heatmaps to compare two datasets. It includes features for handling missing data, creating unified color scales, and saving the results in a format suitable for academic publication.


# vis03.py

## Overview

`vis03.py` is designed to analyze and visualize the estimated price depreciation of electric vehicles (EVs) using two different methods. It combines real-world EV data with predicted values generated by two models: **Mod 1** and **Mod 4**. The script performs data preprocessing, calculates errors, and generates density plots to compare the methods.

## Key Steps

1. **Loading Data**:
   - The script loads three key data sources:
     - `Mod_1_DF.csv` - Estimated prices from model 1.
     - `Mod_4_DF.csv` - Estimated prices from model 4.
     - `Datos_Modificados VE(SYD).xlsx` - Actual vehicle data including current and initial prices.

2. **Data Preprocessing**:
   - The script selects relevant columns from the dataset (`Empresa`, `Model`, `Current Price`, and `Initial Price`).
   - It reshapes the `Mod_1_DF.csv` and `Mod_4_DF.csv` files to create a more suitable format for analysis by melting the data and dropping missing values.

3. **Merging Datasets**:
   - The vehicle data is merged with the predicted data from `Mod 1` and `Mod 4` to align actual prices with estimated prices.

4. **Error Calculation**:
   - The script calculates absolute errors for both models, comparing the current price (`Current Price`) with the predicted prices from model 1 (`Estimated Price Mod 1`) and model 4 (`Estimated Price Mod 4`).

5. **Visualization**:
   - A density plot is generated to display the distribution of price estimation errors across vehicle models for both methods.
   - A red scatter point is used to indicate the intersection point, representing the balance between the buyer and seller utility functions.

6. **Plot Customization and Saving**:
   - The plot is customized with professional color schemes and labeled axes.
   - The figure is saved as both PNG and PDF files in high resolution for publication purposes.

## Functions

- **load_and_clean_data**: This function loads and prepares the data for analysis.
- **calculate_errors**: It calculates the absolute error between predicted and actual vehicle prices for both methods.
- **visualize_results**: Generates density plots for price prediction errors and saves the results in high resolution.

## Output
- The script outputs two density plots comparing the error distributions of the two methods.
- Files are saved as:
  - `figures/Ana03.png`
  - `figures/Ana03.pdf`





